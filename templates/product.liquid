<div class="product-page">
  <div class="product-page-container">
    <div class="product-page-grid">
      <div class="product-page-gallery">
        {% if product.featured_image %}
          <div class="product-page-main-image">
            <img
              src="{{ product.featured_image | image_url: width: 800 }}"
              srcset="{{ product.featured_image | image_url: width: 400 }} 400w, {{ product.featured_image | image_url: width: 600 }} 600w, {{ product.featured_image | image_url: width: 800 }} 800w"
              sizes="(max-width: 768px) 100vw, 50vw"
              alt="{{ product.featured_image.alt | default: product.title | escape }}"
              loading="eager"
              id="product-main-image"
            >
          </div>
          {% if product.images.size > 1 %}
            <div class="product-page-thumbs">
              {% for image in product.images %}
                <button class="product-thumb{% if forloop.first %} active{% endif %}" data-src="{{ image | image_url: width: 800 }}" aria-label="View image {{ forloop.index }}">
                  <img src="{{ image | image_url: width: 120 }}" alt="{{ image.alt | default: product.title | escape }}" loading="lazy">
                </button>
              {% endfor %}
            </div>
          {% endif %}
        {% else %}
          <div class="product-page-main-image product-page-no-image">
            <p>No image available</p>
          </div>
        {% endif %}
      </div>

      <div class="product-page-info">
        <div class="product-page-breadcrumbs">
          <a href="/">Home</a> / <a href="/collections/all">Products</a> / <span>{{ product.title }}</span>
        </div>
        <h1 class="product-page-title">{{ product.title }}</h1>
        <p class="product-page-price">{{ product.price | money }}</p>
        {% if product.compare_at_price > product.price %}
          <p class="product-page-compare">{{ product.compare_at_price | money }}</p>
        {% endif %}

        {% if product.description != blank %}
          <div class="product-page-description">
            {{ product.description }}
          </div>
        {% endif %}

        {% if product.variants.size > 1 %}
          <div class="product-page-variants">
            {% for variant in product.variants %}
              <label class="product-page-variant">
                <input type="radio" name="variant-select" value="{{ variant.id }}" {% if forloop.first %}checked{% endif %}>
                <span>{{ variant.title }}</span>
              </label>
            {% endfor %}
          </div>
        {% endif %}

        <form action="/cart/add" method="post" class="product-page-form">
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" id="product-variant-id">
          <button type="submit" class="product-page-add-btn">Add to Cart</button>
        </form>

        <div class="product-page-trust">
          <span>Free shipping on orders over $75</span>
          <span>30-day returns</span>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.product-page { padding: 40px 0 120px; background: #fafafa; }
.product-page-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.product-page-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 60px; align-items: start;
}
.product-page-main-image {
  border-radius: 16px; overflow: hidden; background: white;
  aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
}
.product-page-main-image img { width: 100%; height: 100%; object-fit: contain; }
.product-page-no-image { color: #ccc; font-size: 16px; }
.product-page-thumbs { display: flex; gap: 10px; margin-top: 16px; }
.product-thumb {
  width: 72px; height: 72px; border-radius: 10px; overflow: hidden;
  border: 2px solid transparent; cursor: pointer; padding: 0; background: white;
  transition: border-color 0.2s;
}
.product-thumb.active { border-color: #1a1a1a; }
.product-thumb img { width: 100%; height: 100%; object-fit: cover; }
.product-page-breadcrumbs {
  font-size: 13px; color: #999; margin-bottom: 20px;
}
.product-page-breadcrumbs a { color: #999; text-decoration: none; }
.product-page-breadcrumbs a:hover { color: #1a1a1a; }
.product-page-title {
  font-family: 'Playfair Display', Georgia, serif;
  font-size: 36px; font-weight: 700; margin-bottom: 12px; color: #1a1a1a;
}
.product-page-price { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
.product-page-compare {
  font-size: 16px; color: #999; text-decoration: line-through; margin-bottom: 20px;
}
.product-page-description {
  font-size: 15px; line-height: 1.7; color: #666;
  margin: 20px 0 28px; padding-bottom: 28px;
  border-bottom: 1px solid #e5e5e5;
}
.product-page-variants {
  display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px;
}
.product-page-variant { cursor: pointer; }
.product-page-variant input { display: none; }
.product-page-variant span {
  display: block; padding: 10px 24px;
  border: 1.5px solid #ddd; border-radius: 980px;
  font-size: 14px; font-weight: 500; transition: all 0.2s;
}
.product-page-variant input:checked + span {
  border-color: #1a1a1a; background: #1a1a1a; color: white;
}
.product-page-form { margin-bottom: 24px; }
.product-page-add-btn {
  display: block; width: 100%; padding: 18px;
  background: #369FFF; color: white; border: none;
  border-radius: 980px; font-size: 17px; font-weight: 600;
  cursor: pointer; transition: background 0.3s, transform 0.3s;
  font-family: inherit;
}
.product-page-add-btn:hover { background: #1a7fe8; transform: scale(1.02); }
.product-page-trust {
  display: flex; gap: 20px; font-size: 13px; color: #999;
}
@media (max-width: 768px) {
  .product-page-grid { grid-template-columns: 1fr; gap: 32px; }
  .product-page-title { font-size: 28px; }
  .product-page { padding: 20px 0 80px; }
}
</style>

<script>
(function() {
  // Image gallery thumbnails
  var thumbs = document.querySelectorAll('.product-thumb');
  var mainImg = document.getElementById('product-main-image');
  if (thumbs.length > 0 && mainImg) {
    thumbs.forEach(function(thumb) {
      thumb.addEventListener('click', function() {
        mainImg.src = this.getAttribute('data-src');
        thumbs.forEach(function(t) { t.classList.remove('active'); });
        this.classList.add('active');
      });
    });
  }
  // Variant selector
  var radios = document.querySelectorAll('.product-page-variant input');
  var variantId = document.getElementById('product-variant-id');
  if (radios.length > 0 && variantId) {
    radios.forEach(function(radio) {
      radio.addEventListener('change', function() { variantId.value = this.value; });
    });
  }
})();
</script>
